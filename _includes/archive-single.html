{% include base_path %}

{% assign teaser = post.header.teaser | default: site.teaser %}
{% assign title = post.title | markdownify | remove: "<p>" | remove: "</p>" %}

<!-- Wrap each publication item with margin-bottom -->
<div class="{{ include.type | default: "list" }}__item" style="margin-bottom: 2.5rem;">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork" style="max-width: 900px; margin: 0 auto; display: flex; gap: 2rem; justify-content: space-between; align-items: flex-start; flex-wrap: wrap;">

    <div class="archive__item-text" style="flex: 1 1 60%;">
      <h2 class="archive__item-title" itemprop="headline" style="margin-top: 0; margin-bottom: 0.25em;">
        {% if post.link %}
          <a href="{{ post.link }}">{{ title }}</a>
          <a href="{{ base_path }}{{ post.url }}" rel="permalink">
            <i class="fa fa-link" aria-hidden="true" title="permalink"></i><span class="sr-only">Permalink</span>
          </a>
        {% else %}
          <a href="{{ base_path }}{{ post.url }}" rel="permalink">{{ title }}</a>
        {% endif %}
      </h2>

      {% if post.authors %}
        <div style="margin-bottom: 0.25em;"><strong>With:</strong>
          {% if post.authors.first.name %}
            {% for author in post.authors %}
              <a href="{{ author.url }}">{{ author.name }}</a>{% unless forloop.last %}, {% endunless %}
            {% endfor %}
          {% else %}
            {{ post.authors }}
          {% endif %}
        </div>
      {% endif %}

      {% if post.venue or post.date %}
        <div style="margin-bottom: 0.25em;">
          {% if post.venue %}<em>{{ post.venue }}</em>{% endif %}{% if post.date %}, {{ post.date | date: "%Y" }}{% endif %}
        </div>
      {% endif %}

      {% if post.abstract %}
        <details style="margin-bottom: 0.25em;">
          <summary style="cursor: pointer;">â–¶ Click for abstract</summary>
          <div style="margin-top: 0.25em;">
            {{ post.abstract | markdownify }}
          </div>
        </details>
      {% endif %}

      {% assign downloads = "" %}
      {% if post.paperurl %}{% assign downloads = downloads | append: '<a href="' | append: post.paperurl | append: '">Download Paper</a>' %}{% endif %}
      {% if post.slidesurl %}{% assign downloads = downloads | append: ' | <a href="' | append: post.slidesurl | append: '">Download Slides</a>' %}{% endif %}
      {% if post.bibtexurl %}{% assign downloads = downloads | append: ' | <a href="' | append: post.bibtexurl | append: '">Download Bibtex</a>' %}{% endif %}
      {% if downloads != "" %}
        <div style="margin-bottom: 0.25em;">{{ downloads }}</div>
      {% endif %}
    </div>

    {% if teaser %}
      <div class="archive__item-teaser" style="flex: 0 0 35%; max-width: 300px;">
        <img src="{% if teaser contains '://' %}{{ teaser }}{% else %}{{ base_path }}/images/{{ teaser }}{% endif %}" alt="{{ title }}" style="width: 100%; height: auto; border-radius: 4px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
      </div>
    {% endif %}

  </article>
</div>


